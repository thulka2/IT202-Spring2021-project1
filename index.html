<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Chicago Land Inventory </title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/simple-sidebar.css" rel="stylesheet">


</head>

<body>

  <div class="d-flex" id="wrapper">

    <!-- Sidebar -->
    <div class="bg-light border-right" id="sidebar-wrapper">
      <div class="sidebar-heading">Chicago Land Inventory </div>
      <div class="list-group list-group-flush" id="sbar">
        <a href="#" data-screen="home" class="list-group-item list-group-item-action bg-light">Home</a>
        <a href="#" data-screen="form" class="list-group-item list-group-item-action bg-light">Form</a>
        <a href="#" data-screen="data" class="list-group-item list-group-item-action bg-light">Data</a>
        <a href="#" data-screen ="map" class="list-group-item list-group-item-action bg-light">Map</a>
        <a href="#" data-screen="about" class="list-group-item list-group-item-action bg-light">About</a>
      </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
      
      <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
      
        <button class="btn btn-primary" id="menu-toggle">View Menu</button>

       

      </nav>


      <!-- Home page -->
      <div class="container-fluid screen" id="home">
        <h1 class="mt-4">Chicago Land Inventory</h1>
        <p>This application lets users search Chicago's city-owned land inventory. It contains multiple options that are made visible with the 'View Menu' button above. </p>
        <p>An overview of page options:</p>
        <p> https://dev.socrata.com/foundry/data.cityofchicago.org/aksk-kvfp dataset </p>
        <ul class="list-group list-group-flus">
            <li class="list-group-item"> Form - A form that allows users to filter the data.  </li>
            <li class="list-group-item"> Data - A list view of the land inventory data.  </li>
            <li class="list-group-item"> Map - The data mapped with with markers and info windows.</li>
            <li class="list-group-item"> About - Information about this app and the owner.</li>

        </ul>
      </div>

      <!-- Form page -->
      <div class="container-fluid screen" id="form">
        <h1 class="mt-4">Form</h1>
        <p>Choose some criteria to filter the results (if none are selected all data is shown)</p>
        <h5 class="mt-4"> Property status </h5>
        <select class="form-select form-select-sm" aria-label=".form-select-sm example">
            <option selected value="">Choose a property status</option>
            <option value="">Any</option>
            <option value="Owned by City">City owned</option>
            <option value="Not City Owned"> Not city owned</option>
            <option value="Sold">Sold</option>
          </select>
        <br/> 
        <h5 class="mt-4"> Zip Code </h5>
        <input id = "zipCodeField" type="text" class="form-control smallform" placeholder="Zip" aria-label="Zip">
        <h5 class="mt-4"> Zoning Classification </h5>
        <input id = "zoningField" type="text" class="form-control smallform" placeholder="Zone" aria-label="Zone">
        <br/>
        <button class="btn btn-primary" id="form-button">Filter</button>


      </div>

      <!-- Data page -->
      <div class="container-fluid screen" id="data">
        <h1 class="mt-4">Data</h1>
        <p>City of Chicago Land Inventory</p>
        <div class="row">
            <div class="card border-dark w-50" >
              <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                <p class="card-text" id="p1">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                <p class="card-text" id = "p2"> blah</p>
            </div>
            </div>
      
      
          </div>
      </div>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Menu Toggle Script -->
  <script>
    $("#menu-toggle").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });
  </script>

  <script>

      document.querySelector("#home").style.display = "block";
      let menuOptions = document.querySelectorAll('div#sbar a');

      let urlToFetch = "https://data.cityofchicago.org/resource/aksk-kvfp.json";

      document.querySelector('a[data-screen=data]').addEventListener("click", (event) => {

        fetch(urlToFetch)
            .then( (response) => {
                return response.json()})
            .then ( (json) => {
                for (let entry of json) {
                    console.log(entry.sq_ft);
                    let cardNode = document.querySelector('div#data .row')
                    let tmp = cardNode.cloneNode(true)
                    
                    tmp.querySelector('h5').innerHTML = entry.community_area_name;
                    tmp.querySelector('h6').innerHTML = entry.sq_ft + "sq ft"; 

                    // paragraph element consists of multiple lines and formatting them
                    tmp.querySelector('p#p1').innerHTML = "Address: " + entry.address;
                    tmp.querySelector('p#p2').innerHTML = "Pin: " + entry.pin;


                    // add card to document body (parentNode)
                    cardNode.parentNode.append(tmp)
                }
                document.body.querySelector('div#data .row').remove()
            })
    })

      menuOptions.forEach( (anchor) => {

       
            
        anchor.addEventListener("click", (event) => {


                document.querySelectorAll(".screen").forEach((screen) => {
                    screen.style.display = "none"; // get rid of the open screens
                })

                let screen = event.target.getAttribute("data-screen");

                let targetScreen = document.querySelector("#" + screen);
                targetScreen.style.display = "block"; // display only the selected screen
                
        })

      })
  </script>

</body>

</html>
